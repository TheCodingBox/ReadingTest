<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reading Speed and Accuracy Test</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      background: #f4f7fa;
      color: #333;
      max-width: 800px;
      margin: auto;
    }
    h1, h2 {
      color: #2c3e50;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-top: 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #2980b9;
    }
    #passage, #questions, #results { display: none; }
    .question { margin-top: 20px; }
    .wrong-answer {
      color: #e74c3c;
      font-weight: bold;
    }
    .right-answer {
      color: #27ae60;
      font-weight: bold;
    }
    .result-box {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    .answer-review {
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h1>Reading Speed and Accuracy Test</h1>

  <div id="intro">
    <p>Click the button below to start the test. Your time will begin once you start reading. Try to read as fast as you can while understanding the passage.</p>
    <button onclick="startReading()">Start Reading</button>
  </div>

  <div id="passage">
    <h2>Reading Passage</h2>
    <p id="readingText"></p>
    <button onclick="finishReading()">Finish Reading</button>
  </div>

  <div id="questions">
    <h2>Comprehension Questions</h2>
    <form id="quizForm"></form>
    <button type="button" onclick="calculateResults()">Submit Answers</button>
  </div>

  <div id="results" class="result-box">
    <h2>Results</h2>
    <p><strong>Time Taken:</strong> <span id="timeTaken"></span> seconds</p>
    <p><strong>Reading Speed:</strong> <span id="wpm"></span> words per minute</p>
    <p><strong>Accuracy:</strong> <span id="score"></span> / 5 (<span id="accuracyPercent"></span>%)</p>
    <div class="answer-review" id="review"></div>
    <button onclick="retryTest()">Try Another Passage</button>
  </div>

  <script>
    const passages = [
      {
        text: `In a small village nestled between rolling hills, an unusual tradition brought the community together each spring. The villagers would gather near the riverbank to release thousands of hand-painted paper boats into the water. Each boat carried a message of hope, love, or remembrance. Some messages were personal, meant for lost relatives or faraway friends, while others carried wishes for good harvests or peaceful days ahead. Children eagerly painted their boats in vibrant colors, while elders wrote their messages with careful precision. As the sun dipped below the horizon, the boats were gently placed on the water, lighting up the surface like tiny glowing stars. It was a sight that left visitors in awe and brought tears to the eyes of those who participated. The festival reminded everyone of the power of unity and the beauty of small gestures. For the villagers, it wasn’t just a tradition—it was a way to express feelings that were often left unspoken during the rest of the year.`,
        answers: {
          q1: 'b',
          q2: 'c',
          q3: 'c',
          q4: 'c',
          q5: 'c'
        },
        questions: [
          '1. What was the central tradition in the village?',
          '2. Who painted the boats in vibrant colors?',
          '3. What did the boats symbolize?',
          '4. When did the villagers release the boats?',
          '5. Why was the tradition important to the villagers?'
        ],
        options: [
          ['a) Planting trees', 'b) Sending paper boats with messages', 'c) Dancing in the river', 'd) Painting houses'],
          ['a) Elders', 'b) Priests', 'c) Children', 'd) Tourists'],
          ['a) Wealth', 'b) Travel', 'c) Hope and remembrance', 'd) Celebration'],
          ['a) At sunrise', 'b) During lunchtime', 'c) At sunset', 'd) After midnight'],
          ['a) It attracted tourists', 'b) It helped with fishing', 'c) It brought the community together and expressed emotions', 'd) It was required by law']
        ]
      },
      {
        text: `In the heart of the bustling city, a hidden garden thrived behind tall brick walls. It was tended by an elderly man named Mr. Wren, who spent his days planting herbs, feeding birds, and sharing stories with curious passersby. Over the years, the garden became a sanctuary for people seeking peace amid the chaos of urban life. Students came to read, artists came to sketch, and the elderly came to reminisce. Mr. Wren believed that every person who entered the garden left a little happier than they arrived. One day, the city planned to demolish the garden to make way for a new shopping center, but the community rallied together in protest. Their voices were heard, and the garden was saved. It became a permanent symbol of what could be achieved through unity and care.`,
        answers: {
          q1: 'a',
          q2: 'd',
          q3: 'b',
          q4: 'c',
          q5: 'd'
        },
        questions: [
          '1. Where was the garden located?',
          '2. Who used the garden to reminisce?',
          '3. What did Mr. Wren believe?',
          '4. What was the city planning to do?',
          '5. What did the garden become a symbol of?'
        ],
        options: [
          ['a) Behind brick walls in a city', 'b) In a schoolyard', 'c) At a countryside farm', 'd) In a castle'],
          ['a) Children', 'b) Teachers', 'c) Tourists', 'd) The elderly'],
          ['a) That plants were magical', 'b) That visitors left happier', 'c) That city life was cruel', 'd) That protests were useless'],
          ['a) Build a hospital', 'b) Expand the subway', 'c) Build a shopping center', 'd) Turn it into a playground'],
          ['a) Money and progress', 'b) Isolation and silence', 'c) Nature and animals', 'd) Unity and care']
        ]
      },
      {
        text: `A young girl named Lina discovered a dusty, locked chest in her grandmother’s attic. Inside, she found dozens of letters from the past, each telling a piece of her family’s history. One letter described how her great-grandfather escaped war; another revealed a hidden love story between two unlikely people. Lina spent the whole summer reading, documenting, and creating a digital archive of everything she found. Her discovery not only connected her with her ancestors but also inspired her to become a historian. Years later, she published a book based on those letters, preserving her family’s legacy for generations.`,
        answers: {
          q1: 'b',
          q2: 'd',
          q3: 'a',
          q4: 'b',
          q5: 'c'
        },
        questions: [
          '1. What did Lina find in the attic?',
          '2. What was one of the letters about?',
          '3. What did Lina do with the letters?',
          '4. What did the letters inspire her to become?',
          '5. What happened years later?'
        ],
        options: [
          ['a) A diary', 'b) A chest of letters', 'c) A photo album', 'd) A time capsule'],
          ['a) A family recipe', 'b) A war plan', 'c) A painting technique', 'd) A hidden love story'],
          ['a) Hid them again', 'b) Sold them', 'c) Ignored them', 'd) Created an archive'],
          ['a) Teacher', 'b) Historian', 'c) Writer', 'd) Artist'],
          ['a) She forgot about them', 'b) She threw them away', 'c) She published a book', 'd) She found more in school']
        ]
      }
    ];

    let currentPassage;
    let startTime, endTime;

    function startReading() {
      currentPassage = passages[Math.floor(Math.random() * passages.length)];
      document.getElementById('intro').style.display = 'none';
      document.getElementById('passage').style.display = 'block';
      document.getElementById('readingText').innerText = currentPassage.text;
      const form = document.getElementById('quizForm');
      form.innerHTML = '';

      currentPassage.questions.forEach((q, i) => {
        const question = document.createElement('div');
        question.className = 'question';
        question.innerHTML = `<label>${q}</label><br>`;

        currentPassage.options[i].forEach(opt => {
          const id = `q${i + 1}`;
          question.innerHTML += `<input type="radio" name="${id}" value="${opt[0]}"> ${opt}<br>`;
        });

        form.appendChild(question);
      });

      startTime = new Date();
    }

    function finishReading() {
      document.getElementById('passage').style.display = 'none';
      document.getElementById('questions').style.display = 'block';
      endTime = new Date();
    }

    function calculateResults() {
      const form = document.getElementById('quizForm');
      const answers = currentPassage.answers;
      let score = 0;
      let reviewHTML = '';

      for (let i = 1; i <= 5; i++) {
        const selected = form.querySelector(`input[name=q${i}]:checked`);
        const correct = answers[`q${i}`];
        const selectedVal = selected ? selected.value : 'None';

        if (selectedVal === correct) {
          score++;
          reviewHTML += `<p><span class="right-answer">Question ${i}: Correct</span></p>`;
        } else {
          reviewHTML += `<p><span class="wrong-answer">Question ${i}: Your answer: ${selectedVal || 'None'} — Correct answer: ${correct}</span></p>`;
        }
      }

      const timeTaken = (endTime - startTime) / 1000;
      const wpm = Math.round((200 / (timeTaken / 60)));
      const accuracyPercent = Math.round((score / 5) * 100);

      document.getElementById('questions').style.display = 'none';
      document.getElementById('results').style.display = 'block';
      document.getElementById('timeTaken').textContent = timeTaken.toFixed(1);
      document.getElementById('wpm').textContent = wpm;
      document.getElementById('score').textContent = score;
      document.getElementById('accuracyPercent').textContent = accuracyPercent;
      document.getElementById('review').innerHTML = reviewHTML;
    }

    function retryTest() {
      document.getElementById('results').style.display = 'none';
      document.getElementById('intro').style.display = 'block';
    }
  </script>
</body>
</html>
